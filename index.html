<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CHRONOS - Registro Global de Intervenciones</title>
    
    <!-- PWA & Standalone Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CHRONOS">
    <meta name="theme-color" content="#020617">

    <!-- Icono PWA Limpio (SVG) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23020617'/><text x='50' y='72' font-family='Arial' font-weight='900' font-style='italic' font-size='65' fill='%23dc2626' text-anchor='middle'>C</text><circle cx='50' cy='50' r='40' fill='none' stroke='white' stroke-width='2' stroke-opacity='0.2'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23020617'/><text x='50' y='72' font-family='Arial' font-weight='900' font-style='italic' font-size='65' fill='%23dc2626' text-anchor='middle'>C</text><circle cx='50' cy='50' r='40' fill='none' stroke='white' stroke-width='2' stroke-opacity='0.2'/></svg>">

    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0; padding: 0;
            background-color: #020617;
            color: #f8fafc;
            overscroll-behavior: none;
            height: 100vh;
            width: 100vw;
            -webkit-tap-highlight-color: transparent;
        }
        #root { height: 100%; width: 100%; position: absolute; top: 0; left: 0; }
        .leaflet-container { background: #020617 !important; height: 100%; width: 100%; }
        
        .marker-count-badge {
            background: #ffffff;
            color: #000000;
            font-weight: 900;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            transform: translate(-50%, -100%);
            pointer-events: none;
            box-shadow: 0 0 10px rgba(220, 38, 38, 0.5);
            border: 1.5px solid #dc2626;
            z-index: 1000;
        }

        input[type=range] { -webkit-appearance: none; background: transparent; width: 100%; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px; width: 20px;
            border-radius: 50%; background: #dc2626;
            cursor: pointer; border: 3px solid #0f172a;
            margin-top: -8px;
            box-shadow: 0 0 10px rgba(220, 38, 38, 0.4);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px;
            background: rgba(255, 255, 255, 0.1); border-radius: 2px;
        }

        @media (min-width: 768px) {
            input[type=range]::-webkit-slider-thumb { height: 28px; width: 28px; margin-top: -12px; }
            .marker-count-badge { width: 22px; height: 22px; font-size: 11px; }
        }

        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .animate-slideInRight { animation: slideInRight 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .custom-popup .leaflet-popup-content-wrapper { background: #0f172a; color: #fff; border-radius: 12px; }
        .custom-popup .leaflet-popup-tip { background: #0f172a; }
    </style>
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "react-leaflet": "https://esm.sh/react-leaflet@^5.0.0",
    "leaflet": "https://esm.sh/leaflet@^1.9.4"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(reg => {
                    reg.onupdatefound = () => {
                        const installingWorker = reg.installing;
                        installingWorker.onstatechange = () => {
                            if (installingWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // Forzar recarga si hay actualización
                                window.location.reload();
                            }
                        };
                    };
                }).catch(err => console.log('SW error:', err));
            });
        }
    </script>

    <script type="text/babel" data-presets="react,typescript">
        const { useState, useEffect, useMemo, useRef } = React;

        const interventionsData = [
            // AMÉRICA LATINA Y CARIBE
            { id: "gt-1954", country: "Guatemala", years: [1954, 1960, 1966, 1967, 1968, 1969, 1970, 1982], type: 'operation', description: "Operación PBSUCCESS.", expandedDescription: "Derrocamiento de Árbenz en 1954. Décadas de bombardeos y apoyo a genocidio indígena.", coordinates: [15.78, -90.23] },
            { id: "br-1964", country: "Brasil", years: [1964, 1968, 1971], type: 'coup', description: "Operación Brother Sam.", expandedDescription: "Apoyo naval y financiero al golpe. Dictadura militar de 21 años.", coordinates: [-14.23, -51.92] },
            { id: "rd-1965", country: "Rep. Dominicana", years: [1916, 1961, 1965, 1966], type: 'operation', description: "Operación Power Pack.", expandedDescription: "Invasión de 42,000 marines en 1965 para aplastar la revolución constitucionalista.", coordinates: [18.73, -70.16] },
            { id: "uy-1973", country: "Uruguay", years: [1969, 1973], type: 'coup', description: "Plan Cóndor.", expandedDescription: "Asesoramiento de la CIA en técnicas de tortura y desaparición forzada.", coordinates: [-32.52, -55.76] },
            { id: "cl-1973", country: "Chile", years: [1970, 1971, 1972, 1973, 1974], type: 'coup', description: "Golpe contra Allende.", expandedDescription: "Asfixia económica y bombardeo de La Moneda. Posterior apoyo total a Pinochet.", coordinates: [-35.67, -71.54] },
            { id: "ar-76", country: "Argentina", years: [1976, 1977, 1978, 2024, 2025, 2026], type: 'coup', description: "Guerra Sucia y Litio.", expandedDescription: "Apoyo a la Junta Militar y presiones modernas por el litio y energía.", coordinates: [-38.41, -63.61] },
            { id: "ni-81", country: "Nicaragua", years: [1912, 1926, 1933, 1981, 1982, 1984, 1986, 1990], type: 'operation', description: "Guerra de los 'Contras'.", expandedDescription: "Financiamiento ilegal de paramilitares y minado de puertos condenado por la CIJ.", coordinates: [12.86, -85.20] },
            { id: "gr-83", country: "Granada", years: [1983], type: 'operation', description: "Operación Furia Urgente.", expandedDescription: "Invasión militar total para derrocar al gobierno socialista.", coordinates: [12.11, -61.67] },
            { id: "pa-89", country: "Panamá", years: [1903, 1918, 1964, 1989, 1990], type: 'operation', description: "Invasión 'Causa Justa'.", expandedDescription: "Bombardeo de barrios civiles para capturar a Noriega y asegurar control del Canal.", coordinates: [8.53, -80.78] },
            { id: "ht-94", country: "Haití", years: [1915, 1934, 1991, 1994, 2004, 2024], type: 'operation', description: "Ocupaciones de Marines.", expandedDescription: "Intervenciones constantes para deponer presidentes y asegurar control territorial.", coordinates: [18.97, -72.28] },
            { id: "ve-02", country: "Venezuela", years: [2002, 2013, 2017, 2019, 2020, 2025, 2026], type: 'coup', description: "Guerra Híbrida.", expandedDescription: "Intentos de golpe, sabotajes y reconocimiento de gobiernos paralelos para control petrolero.", coordinates: [6.42, -66.58] },
            { id: "bo-19", country: "Bolivia", years: [1971, 2008, 2019], type: 'coup', description: "Golpe contra Morales.", expandedDescription: "Uso de la OEA para forzar la salida del gobierno y asegurar control del litio.", coordinates: [-16.29, -63.58] },
            { id: "cu-61", country: "Cuba", years: [1898, 1906, 1912, 1917, 1933, 1961, 1962, 1971, 1980, 1996, 2024, 2026], type: 'operation', description: "Bloqueo y Bahía Cochinos.", expandedDescription: "Asedio económico de seis décadas e intentos constantes de sabotaje.", coordinates: [23.13, -82.38] },
            { id: "hn-09", country: "Honduras", years: [1911, 1924, 2009], type: 'coup', description: "Golpe contra Zelaya.", expandedDescription: "Apoyo logístico al golpe de 2009 para frenar reformas soberanas.", coordinates: [15.19, -86.24] },
            { id: "mx-14", country: "México", years: [1846, 1914, 1917], type: 'operation', description: "Ocupación de Veracruz.", expandedDescription: "Robo territorial masivo y bombardeos durante la Revolución Mexicana.", coordinates: [19.17, -96.13] },
            { id: "ec-63", country: "Ecuador", years: [1963, 2000, 2010], type: 'coup', description: "Inestabilidad Inducida.", expandedDescription: "Derrocamiento de gobiernos que se oponían a Washington.", coordinates: [-1.83, -78.18] },
            { id: "py-54", country: "Paraguay", years: [1954, 2012], type: 'coup', description: "Apoyo a Stroessner.", expandedDescription: "Sostenimiento de la dictadura más larga y golpe parlamentario en 2012.", coordinates: [-23.44, -58.44] },
            { id: "sv-80", country: "El Salvador", years: [1932, 1980, 1981, 1982, 1983, 1984, 1989], type: 'operation', description: "Escuadrones de la Muerte.", expandedDescription: "Financiamiento de la masacre de El Mozote y apoyo militar contrainsurgente.", coordinates: [13.79, -88.89] },
            { id: "pr-37", country: "Puerto Rico", years: [1898, 1937, 1950, 1954], type: 'operation', description: "Masacre de Ponce.", expandedDescription: "Represión violenta de los movimientos de independencia.", coordinates: [18.22, -66.59] },
            { id: "gy-64", country: "Guyana", years: [1953, 1964], type: 'coup', description: "Operaciones CIA.", expandedDescription: "Sabotaje y huelgas para evitar un gobierno socialista regional.", coordinates: [6.80, -58.15] },

            // ASIA Y ORIENTE MEDIO
            { id: "cn-00", country: "China", years: [1900, 1945, 1946, 1947, 1948, 1949, 1950, 1954, 1958, 1996, 2024, 2025, 2026], type: 'operation', description: "Asedio y Contención.", expandedDescription: "Desde la Rebelión de los Bóxers (1900) hasta las actuales tensiones en Taiwán proyectadas a 2026.", coordinates: [35.86, 104.19] },
            { id: "iq-03", country: "Irak", years: [1963, 1991, 1993, 1996, 1998, 2003, 2004, 2014, 2025, 2026], type: 'operation', description: "Invasión Ilegal.", expandedDescription: "Guerra basada en mentiras que destruyó el estado iraquí.", coordinates: [33.22, 43.67] },
            { id: "af-01", country: "Afganistán", years: [1979, 1998, 2001, 2010, 2021], type: 'operation', description: "Guerra de 20 años.", expandedDescription: "Ocupación total tras financiar extremistas. Retirada desastrosa en 2021.", coordinates: [33.93, 67.71] },
            { id: "vn-64", country: "Vietnam", years: [1945, 1954, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973], type: 'operation', description: "Terror Químico.", expandedDescription: "Uso masivo de Napalm y Agente Naranja. 3 millones de muertos.", coordinates: [14.05, 108.27] },
            { id: "la-64", country: "Laos", years: [1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973], type: 'operation', description: "Guerra Secreta.", expandedDescription: "El país más bombardeado del mundo per cápita por la CIA.", coordinates: [19.85, 102.49] },
            { id: "kh-69", country: "Camboya", years: [1969, 1970, 1971, 1972, 1973], type: 'operation', description: "Operación Menú.", expandedDescription: "Bombardeos ilegales que facilitaron el ascenso de los Jemeres Rojos.", coordinates: [12.56, 104.99] },
            { id: "ps-23", country: "Palestina", years: [1948, 1967, 1973, 2008, 2014, 2023, 2024, 2025, 2026], type: 'operation', description: "Apoyo en Gaza.", expandedDescription: "Suministro masivo de bombas y blindaje diplomático para la ofensiva total.", coordinates: [31.35, 34.30] },
            { id: "ir-53", country: "Irán", years: [1953, 1979, 1980, 1988, 2020, 2025, 2026], type: 'coup', description: "Operación Ajax.", expandedDescription: "Derrocamiento de Mossadegh por el petróleo y asedio económico actual.", coordinates: [32.42, 53.68] },
            { id: "id-65", country: "Indonesia", years: [1958, 1965, 1966], type: 'coup', description: "Masacre Anticomunista.", expandedDescription: "Listas de objetivos de la CIA para el exterminio de un millón de personas.", coordinates: [-0.78, 113.92] },
            { id: "ph-1899", country: "Filipinas", years: [1899, 1902, 1946, 1972], type: 'operation', description: "Guerra Colonial.", expandedDescription: "Conquista militar y apoyo a la dictadura de Marcos.", coordinates: [12.87, 121.77] },
            { id: "kr-50", country: "Corea", years: [1945, 1950, 1953, 2024, 2026], type: 'operation', description: "Guerra de Corea.", expandedDescription: "Bombardeos de saturación que destruyeron el 90% del norte.", coordinates: [35.90, 127.76] },
            { id: "pk-07", country: "Pakistán", years: [1958, 1977, 2004, 2011, 2015, 2024], type: 'operation', description: "Guerra de Drones.", expandedDescription: "Ataques constantes en zonas civiles causando bajas colaterales masivas.", coordinates: [30.33, 71.38] },
            { id: "th-60", country: "Tailandia", years: [1960, 1973, 1976], type: 'coup', description: "Base Logística.", expandedDescription: "Apoyo a dictaduras para asegurar bases militares regionales.", coordinates: [15.87, 100.99] },
            { id: "ti-51", country: "Tíbet", years: [1951, 1959, 1960], type: 'operation', description: "Insurgencia CIA.", expandedDescription: "Entrenamiento de guerrillas para desestabilizar la región.", coordinates: [31.70, 86.85] },
            { id: "lb-58", country: "Líbano", years: [1958, 1982, 1984, 2006], type: "operation", description: "Intervención Marines.", expandedDescription: "Presencia militar para influir en el equilibrio de poder.", coordinates: [33.85, 35.86] },
            { id: "sy-49", country: "Siria", years: [1949, 1957, 2011, 2014, 2017, 2025], type: "operation", description: "Guerra delegada.", expandedDescription: "Apoyo a grupos armados y bombardeos directos contra el estado.", coordinates: [34.80, 38.99] },
            { id: "ye-15", country: "Yemen", years: [2002, 2015, 2024, 2026], type: 'operation', description: "Guerra asimétrica.", expandedDescription: "Apoyo a la coalición que causó crisis humanitarias masivas.", coordinates: [15.36, 44.19] },
            { id: "tr-80", country: "Turquía", years: [1960, 1971, 1980], type: 'coup', description: "Apoyo a Golpes.", expandedDescription: "Intervenciones para mantener a Turquía en la OTAN.", coordinates: [38.96, 35.24] },
            { id: "jp-1945", country: "Japón", years: [1945, 1946], type: 'operation', description: "Bombas Atómicas.", expandedDescription: "Uso de armas nucleares contra Hiroshima y Nagasaki.", coordinates: [36.20, 138.25] },

            // ÁFRICA
            { id: "ly-11", country: "Libia", years: [1981, 1986, 2011, 2015, 2019], type: 'operation', description: "Bombardeos OTAN.", expandedDescription: "Destrucción del estado y ejecución de Gadafi.", coordinates: [31.22, 16.51] },
            { id: "cd-60", country: "Congo (RDC)", years: [1960, 1961, 1964, 1965, 1997], type: 'coup', description: "Asesinato de Lumumba.", expandedDescription: "Eliminación del líder independentista por recursos minerales.", coordinates: [-4.03, 21.75] },
            { id: "so-93", country: "Somalia", years: [1992, 1993, 2007, 2010, 2025, 2026], type: 'operation', description: "Black Hawk Down.", expandedDescription: "Intervenciones directas y asedio permanente de drones.", coordinates: [2.04, 45.34] },
            { id: "sd-98", country: "Sudán", years: [1998, 2019, 2024], type: 'operation', description: "Bombardeo Al-Shifa.", expandedDescription: "Destrucción de fábrica farmacéutica bajo falsas sospechas.", coordinates: [15.60, 32.53] },
            { id: "ao-75", country: "Angola", years: [1975, 1986, 1991], type: 'operation', description: "Apoyo a UNITA.", expandedDescription: "Financiamiento de guerrillas contra movimientos anticoloniales.", coordinates: [-11.20, 17.87] },
            { id: "ne-23", country: "Níger", years: [2023, 2024, 2026], type: 'coup', description: "Asedio Drones.", expandedDescription: "Control militar tras cambios de gobierno estratégicos.", coordinates: [17.60, 8.08] },
            { id: "eg-52", country: "Egipto", years: [1952, 1956, 1967, 2011, 2013], type: 'coup', description: "Canal de Suez.", expandedDescription: "Intervenciones para el control de la ruta comercial mundial.", coordinates: [26.82, 30.80] },
            { id: "gh-66", country: "Ghana", years: [1966], type: 'coup', description: "Golpe contra Nkrumah.", expandedDescription: "Operación de la CIA para eliminar al líder panafricanista.", coordinates: [7.94, -1.02] },
            { id: "ss-24", country: "Sudán del Sur", years: [2011, 2014, 2024], type: 'operation', description: "Control Recursos.", expandedDescription: "Manipulación de conflictos por enclaves energéticos.", coordinates: [6.87, 31.30] },

            // EUROPA Y ÁRTICO
            { id: "gl-26", country: "Groenlandia", years: [2019, 2026], type: 'operation', description: "Amenaza Anexión.", expandedDescription: "Proyección de control militar por recursos minerales del Ártico.", coordinates: [72.33, -42.49] },
            { id: "ua-14", country: "Ucrania", years: [2004, 2014, 2022, 2025, 2026], type: 'coup', description: "EuroMaidán.", expandedDescription: "Cambio de gobierno y apoyo militar masivo para expansión de OTAN.", coordinates: [50.45, 30.52] },
            { id: "ns-22", country: "Nord Stream", years: [2022], type: 'operation', description: "Sabotaje Báltico.", expandedDescription: "Ataque contra infraestructura civil energética crítica.", coordinates: [55.35, 15.55] },
            { id: "gr-47", country: "Grecia", years: [1947, 1967, 1973], type: 'operation', description: "Doctrina Truman.", expandedDescription: "Apoyo a la junta militar contra movimientos populares.", coordinates: [39.07, 21.82] },
            { id: "it-48", country: "Italia", years: [1948, 1970], type: 'coup', description: "Operación Gladio.", expandedDescription: "Interferencias electorales y redes secretas contra la izquierda.", coordinates: [41.87, 12.56] },
            { id: "yu-99", country: "Yugoslavia", years: [1999], type: 'operation', description: "Bombardeos OTAN.", expandedDescription: "Bombardeos que fragmentaron el país irreversiblemente.", coordinates: [44.01, 21.00] },
            { id: "de-45", country: "Alemania", years: [1945, 1948], type: 'operation', description: "Paperclip.", expandedDescription: "Bombardeos y reclutamiento secreto de científicos nazis.", coordinates: [51.16, 10.45] },
            { id: "ru-18", country: "Rusia", years: [1918, 1920, 1991, 2024], type: 'operation', description: "Intervención 1918.", expandedDescription: "Expedición militar contra los soviets y asedio moderno.", coordinates: [64.53, 40.54] },
            { id: "pl-81", country: "Polonia", years: [1981, 1982], type: 'operation', description: "Solidaridad.", expandedDescription: "Financiamiento encubierto para desestabilizar el bloque del este.", coordinates: [51.91, 19.14] },
            { id: "be-61", country: "Bélgica", years: [1961], type: 'coup', description: "Interferencia Congo.", expandedDescription: "Coordinación para eliminar líderes independentistas africanos.", coordinates: [50.50, 4.46] },
            { id: "fr-50", country: "Francia", years: [1950, 1954], type: 'operation', description: "Apoyo Indochina.", expandedDescription: "Financiamiento colonial antes de la guerra de Vietnam.", coordinates: [46.22, 2.21] }
        ];

        const App = () => {
            const [selectedYear, setSelectedYear] = useState(null);
            const [selectedIntervention, setSelectedIntervention] = useState(null);
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);
            const [currentZoom, setCurrentZoom] = useState(2.5);
            const mapRef = useRef(null);

            const availableYears = useMemo(() => {
                const yearsSet = new Set();
                interventionsData.forEach(i => i.years.forEach(y => yearsSet.add(y)));
                return Array.from(yearsSet).sort((a, b) => a - b);
            }, []);

            const filteredInterventions = useMemo(() => {
                if (selectedYear === null) return interventionsData;
                return interventionsData.filter(i => i.years.includes(selectedYear));
            }, [selectedYear]);

            const stats = useMemo(() => {
                let ops = 0, coups = 0;
                filteredInterventions.forEach(i => {
                    const weight = selectedYear ? 1 : i.years.length;
                    if (i.type === 'operation') ops += weight;
                    else coups += weight;
                });
                return { ops, coups };
            }, [filteredInterventions, selectedYear]);

            useEffect(() => {
                const map = L.map('map', { zoomControl: false, attributionControl: false, minZoom: 2 });
                mapRef.current = map;
                map.setView([20, 0], 2.5);
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
                L.control.zoom({ position: 'bottomright' }).addTo(map);
                map.on('zoomend', () => setCurrentZoom(map.getZoom()));
                setTimeout(() => map.invalidateSize(), 500);
                return () => map.remove();
            }, []);

            useEffect(() => {
                if (!mapRef.current) return;
                const map = mapRef.current;
                map.eachLayer(layer => { if (layer instanceof L.CircleMarker || layer instanceof L.Marker) map.removeLayer(layer); });

                filteredInterventions.forEach(i => {
                    const scale = Math.max(0.6, currentZoom / 4);
                    const radius = (selectedYear ? 12 : 8 + Math.min(i.years.length, 12)) * scale;
                    
                    if (!selectedYear && i.years.length > 1) {
                        const icon = L.divIcon({
                            html: `<div class="marker-count-badge">${i.years.length}</div>`,
                            className: '', iconSize: [0, 0], iconAnchor: [0, 12]
                        });
                        L.marker(i.coordinates, { icon }).addTo(map);
                    }

                    const circle = L.circleMarker(i.coordinates, {
                        radius, fillColor: i.type === 'operation' ? '#ef4444' : '#f59e0b',
                        fillOpacity: 0.85, color: '#fff', weight: 1.5
                    }).addTo(map);

                    circle.on('click', () => { 
                        setSelectedIntervention(i); 
                        setIsSidebarOpen(true); 
                        map.flyTo(i.coordinates, 5); 
                    });
                });
            }, [filteredInterventions, selectedYear, currentZoom]);

            return (
                <div className="relative h-screen w-screen overflow-hidden flex flex-col select-none bg-slate-950 font-sans">
                    <header className="absolute top-0 left-0 right-0 z-[1000] p-4 md:p-8 bg-gradient-to-b from-slate-950/95 to-transparent pointer-events-none">
                        <div className="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-start pointer-events-auto">
                            <div>
                                <h1 className="text-4xl md:text-8xl font-black italic uppercase leading-none tracking-tighter">
                                    <span className="text-white">CHRON</span><span className="text-red-600">OS</span>
                                </h1>
                                <div className="flex items-center gap-2 mt-1">
                                    <p className="text-slate-500 text-[8px] md:text-xs font-bold uppercase tracking-[0.3em]">ARCHIVO DE INTERVENCIONES GLOBAL <span className="text-red-600">USA</span></p>
                                    <span className="bg-slate-800 text-slate-500 text-[6px] px-1 rounded">V2.0.1</span>
                                </div>
                            </div>
                            <div className="flex gap-2 mt-2 md:mt-0">
                                <div className="bg-slate-900/90 border-l-4 border-red-600 px-3 py-1.5 rounded-r-lg shadow-xl backdrop-blur-xl">
                                    <span className="text-[8px] font-black text-red-500 uppercase block">Ataques</span>
                                    <span className="text-2xl md:text-3xl font-black tabular-nums">{stats.ops}</span>
                                </div>
                                <div className="bg-slate-900/90 border-l-4 border-amber-500 px-3 py-1.5 rounded-r-lg shadow-xl backdrop-blur-xl">
                                    <span className="text-[8px] font-black text-amber-500 uppercase block">Golpes</span>
                                    <span className="text-2xl md:text-3xl font-black tabular-nums">{stats.coups}</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div id="map" className="flex-grow z-0"></div>

                    <div className="fixed bottom-0 left-0 right-0 z-[1000] p-4 md:p-8 bg-gradient-to-t from-slate-950/95 to-transparent pointer-events-none">
                        <div className="max-w-2xl mx-auto bg-slate-900/95 backdrop-blur-3xl p-5 md:p-8 rounded-xl md:rounded-[40px] border border-slate-800 shadow-2xl pointer-events-auto">
                            <div className="flex justify-between items-end mb-4">
                                <div className="flex flex-col">
                                    <span className="text-[8px] md:text-[10px] font-black text-red-600 uppercase tracking-widest">CRONOLOGÍA</span>
                                    <h4 className="text-xl md:text-4xl font-black italic text-white tracking-tighter leading-none">{selectedYear || 'VISTA GLOBAL'}</h4>
                                </div>
                                <button onClick={() => {setSelectedYear(null); setSelectedIntervention(null);}} className={`px-6 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${selectedYear === null ? 'bg-red-600 shadow-lg' : 'bg-slate-800 text-slate-500 hover:text-white'}`}>RESET</button>
                            </div>
                            <input type="range" min="0" max={availableYears.length - 1} step="1" value={selectedYear ? availableYears.indexOf(selectedYear) : 0} onChange={(e) => setSelectedYear(availableYears[e.target.value])} />
                            <div className="flex justify-between mt-3 text-[9px] md:text-[11px] font-black text-slate-600 uppercase">
                                <span>{availableYears[0]}</span>
                                <span>{availableYears[availableYears.length - 1]}</span>
                            </div>
                        </div>
                    </div>

                    <aside className={`fixed inset-y-0 right-0 z-[2000] w-full md:w-[500px] bg-slate-950/99 backdrop-blur-3xl border-l border-slate-800 flex flex-col transition-transform duration-500 ${isSidebarOpen ? 'translate-x-0' : 'translate-x-full'}`}>
                        <div className="p-6 md:p-10 border-b border-slate-800 flex justify-between items-center bg-slate-900/50">
                            <div><span className="text-[10px] font-black text-red-600 uppercase block mb-1 tracking-widest">Dossier Militar</span><h2 className="text-4xl md:text-5xl font-black italic uppercase tracking-tighter text-white leading-none">{selectedIntervention?.country}</h2></div>
                            <button onClick={() => setIsSidebarOpen(false)} className="p-4 bg-slate-800 rounded-full hover:bg-red-600 transition-colors shadow-xl"><svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                        </div>
                        <div className="p-10 md:p-16 overflow-y-auto no-scrollbar flex-grow">
                            {selectedIntervention ? (
                                <div className="animate-slideInRight space-y-10 md:space-y-12">
                                    <div className="flex flex-wrap gap-2.5">{selectedIntervention.years.map(y => <span key={y} className="bg-red-600 text-white px-4 py-1.5 rounded-lg text-[12px] font-black shadow-lg tracking-widest">{y}</span>)}</div>
                                    <div className="space-y-8">
                                        <h3 className="text-4xl md:text-5xl font-black italic uppercase tracking-tighter text-white leading-none">{selectedIntervention.description}</h3>
                                        <div className="h-2 w-20 bg-red-600 rounded-full"></div>
                                        <p className="text-slate-300 text-2xl md:text-3xl leading-relaxed font-medium">{selectedIntervention.expandedDescription}</p>
                                    </div>
                                </div>
                            ) : (<div className="h-full flex items-center justify-center opacity-10 uppercase font-black tracking-widest text-xl">Seleccione un objetivo</div>)}
                        </div>
                    </aside>

                    {isSidebarOpen && <div className="fixed inset-0 bg-black/80 z-[1900] md:hidden backdrop-blur-sm" onClick={() => setIsSidebarOpen(false)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>